
# Tokenizer

For this demo, a couple of AWS Lambda services have been developed:

* TokenizeCard: Receives Credit Card information and returns a 16 character token associated with the card. The token has a valid time of 15 minutes.
* GetCard: With the token generated by TokenizeCard, we can retrieve its associated credit card information. The card information excludes the cvv.




## Running locally

### Requirements
* Be sure you have installed AWS CLI. If you have not installed yet please check [this guide](https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html).
* Be sure you have installed SAM CLI. If you have not installed yet please check [this guide](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html).
* Be sure you have installed NodeJS. If not, please visit [NodeJS](https://nodejs.org/en/).
* Clone the repository on any desired folder.


## Building the solution
On the folder where the repository was cloned, run the following command

```
$ npm run build
```


## Running the solution locally
On the folder where the repository was cloned, run the following command

```
$ npm run local
```

The base url, in order to make calls to the local lambda functions, is **http://127.0.0.1:3000/**

## Features

- 15 minutes Token generator associated to a Credit Card
- Credit Card data retrieving based on generated token

## API Reference

#### Tokenize Card

```http
  POST /api/tokens
```

Request:
| Field | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `credit_card`      | `string` | **Required**. Credit card number |
| `cvv`      | `string` | **Required**. Credit card cvv number |
| `expirationYear`      | `string` | **Required**. Credit Card expiration year |
| `expirationMonth`      | `string` | **Required**. Credit Card expiration month |
| `email`      | `string` | **Required**. Credit card holder email |

Response:
| Field | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `token`      | `string` | 16 Character generated token. It is valid for 15 minutes |

#### Get Card

```http
  GET /tokens/{token}
```

| Parameter | Type     | Description                |
| :-------- | :------- | :------------------------- |
| `token` | `string` | **Required**. Token associated with a Credit Card |

Response:
| Field | Type     | Description                       |
| :-------- | :------- | :-------------------------------- |
| `credit_card`      | `string` | **Required**. Credit card number |
| `expirationYear`      | `string` | **Required**. Credit Card expiration year |
| `expirationMonth`      | `string` | **Required**. Credit Card expiration month |
| `email`      | `string` | **Required**. Credit card holder email |





## AWS Deployed Functions

The base url, in order to make calls to the lambda functions on AWS, is **https://nrcha88u1l.execute-api.us-east-1.amazonaws.com/Prod/**
